{"version":3,"sources":["webpack:///./stores/appointment_list.js","webpack:///./helpers/get_param.js","webpack:///./pages_mobile/appointment/list.js","webpack:///./config/CONSTANT.js","webpack:///./helpers/fresh_token.js","webpack:///./helpers/multiple_class.js","webpack:///./less/appointment_list.less?108f"],"names":["_mobx","__webpack_require__","_moment","Store","_moment2","default","this","date","format","observable","toDate","computed","param","reg","RegExp","result","location","search","substr","match","decodeURIComponent","_react","_mobxReact","_CONSTANT","_fresh_token","moment","locale","AppointmentList","observer","props","_classCallCheck","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","_initialiseProps","store","dataSource","_listView2","DataSource","rowHasChanged","row1","row2","appointment_list","day","_get_param2","Date","page","Component","_this2","visible","user_type","loading","_react2","createElement","className","_multiple_class2","styles","_button2","inline","size","onClick","goIndex","_list2","style","borderBottom","Item","openDateModal","_datePicker2","mode","onDismiss","closeDateModal","onOk","setDate","renderSectionHeader","renderRow","rowData","sectionID","rowID","_ref","btns","parseInt","state","type","reject","order_id","resolve","cancel","disabled","key","padding","display","_defineProperty","height","marginRight","src","headimgurl","alt","lineHeight","flexGrow","flexShrink","marginBottom","fontWeight","name","address","sex","MALE","service","service_item","money","renderSeparator","margin","renderFooter","textAlign","pageSize","useBodyScroll","onEndReached","loadMore","getAppointmentList","arguments","length","undefined","_this3","axios","get","params","SIZE","then","res","resData","data","appointmentList","Array","from","concatResult","user_grade","concat","orders","total","cloneWithRows","catch","_modal2","alert","text","onPress","handleAppointment","post","id","error_code","errorCode","forEach","a","getWxToken","history","push","FEMALE","wxToken","notForce","code","pathname","requestURL","encodeURIComponent","window","refreshWxToken","styleObj","classStr","trim","split","map","join","module","exports","home","btn-group"],"mappings":"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","file":"scripts/19_90fed2803bd7c99fc046.js","sourcesContent":["import { observable, computed } from 'mobx';\r\nimport moment from 'moment';\r\nclass Store {\r\n\t@observable date = moment().toDate();\r\n\t@observable visible = false;\r\n\t@observable appointment_list = [];\r\n\t@observable dataSource ;\r\n\t@observable user_type;\r\n\t@observable loading = false;\r\n\t@computed get day(){\r\n\t\treturn moment(this.date).format('YYYY-MM-DD');\r\n\t}\r\n}\r\nexport default new Store();","let getParam = (param) => {\r\n\tlet reg = new RegExp(`(^|&)${param}=([^&]*)(&|$)`);\r\n\tlet result = location.search.substr(1).match(reg);\r\n\tif (result != null) return decodeURIComponent(result[2]);\r\n\treturn null;\r\n};\r\nexport default getParam;","import React, { Component } from 'react';\r\nimport { Button, List, DatePicker, ListView, Modal } from 'antd-mobile';\r\nimport multipleClass from '../../helpers/multiple_class';\r\nimport styles from '../../less/appointment_list.less';\r\nimport { observer } from 'mobx-react';\r\nimport store from '../../stores/appointment_list';\r\nimport moment from 'moment';\r\nmoment.locale('zh_cn');\r\nimport axios from 'axios';\r\nimport { SIZE, MALE, FEMALE} from \"../../config/CONSTANT\";\r\nimport getParam from \"../../helpers/get_param\";\r\nimport { getWxToken } from \"../../helpers/fresh_token\";\r\n@observer\r\nclass AppointmentList extends Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tstore.dataSource = new ListView.DataSource({\r\n\t\t\trowHasChanged: (row1, row2) => row1 !== row2,\r\n\t\t});\r\n\t\tstore.appointment_list = [];\r\n\t\tlet day = getParam('day');\r\n\t\tif(day){\r\n\t\t\tstore.date = new Date(day);\r\n\t\t}\r\n\t\tthis.page = 1;\r\n\t}\r\n\trender(){\r\n\t\tlet { date, visible, dataSource, user_type, loading } = store;\r\n\t\tconst separator = (sectionID, rowID) => (\r\n\t\t\t<div\r\n\t\t\t\tkey={`${sectionID}-${rowID}`}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmargin: '0 15px',\r\n\t\t\t\t\tborderBottom: '1px solid #ECECED',\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tconst row = (rowData, sectionID, rowID) => {\r\n\t\t\tlet btns = [];\r\n\t\t\tswitch (parseInt(rowData.state)){\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif(user_type === 'admin'){\r\n\t\t\t\t\t\tbtns = [\r\n\t\t\t\t\t\t\t<Button inline={true} size='small' type='warning' onClick={() => this.reject(rowData.order_id)}>拒绝</Button>,\r\n\t\t\t\t\t\t\t<Button inline={true} size='small' type='primary' onClick={() => this.resolve(rowData.order_id)}>受理</Button>\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbtns = [\r\n\t\t\t\t\t\t\t<Button inline={true} size='small' type='warning' onClick={() => this.cancel(rowData.order_id)}>取消</Button>\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tbtns = [\r\n\t\t\t\t\t\t<Button inline={true} size='small' type='primary' disabled={true}>已受理</Button>\r\n\t\t\t\t\t];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tbtns = [\r\n\t\t\t\t\t\t<Button inline={true} size='small' type='warning' disabled={true}>已受理</Button>\r\n\t\t\t\t\t];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tbtns = [\r\n\t\t\t\t\t\t<Button inline={true} size='small' type='ghost' disabled={true} >已取消</Button>\r\n\t\t\t\t\t];\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<div key={rowID} style={{ padding: '0 15px' }}>\r\n\t\t\t\t\t<div style={{ display: '-webkit-box', display: 'flex', padding: '15px 0' }}>\r\n\t\t\t\t\t\t<img style={{ height: '64px', marginRight: '15px' }} src={rowData.headimgurl} alt=\"\" />\r\n\t\t\t\t\t\t<div style={{ lineHeight: 1, flexGrow: 1, flexShrink: 1 }}>\r\n\t\t\t\t\t\t\t<div style={{ marginBottom: '8px', fontWeight: 'bold' }}>{rowData.name}</div>\r\n\t\t\t\t\t\t\t<p>{rowData.address}, {rowData.sex === MALE ? '男' : '女'}</p>\r\n\t\t\t\t\t\t\t<p>{rowData.service + '/' +rowData.service_item}{rowData.money > 0 ? '/' + rowData.money : ''}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={multipleClass(styles, 'btn-group')}>{btns}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div className='appointment_list'>\r\n\t\t\t\t<div className={multipleClass(styles, 'home')}>\r\n\t\t\t\t\t<Button inline={true} size='small' onClick={this.goIndex}>首页</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<List style={{borderBottom:'none'}}>\r\n\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\tonClick={this.openDateModal}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span>预约日期</span>\r\n\t\t\t\t\t\t<span className={multipleClass(styles, 'date')}>{moment(date).format('YYYY/MM/DD dddd')}</span>\r\n\t\t\t\t\t</List.Item>\r\n\t\t\t\t</List>\r\n\t\t\t\t<DatePicker\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tmode='date'\r\n\t\t\t\t\tonDismiss={this.closeDateModal}\r\n\t\t\t\t\tonOk={this.setDate}\r\n\t\t\t\t/>\r\n\t\t\t\t<ListView\r\n\t\t\t\t\tdataSource={dataSource}\r\n\t\t\t\t\trenderSectionHeader={() => <span>预约列表</span>}\r\n\t\t\t\t\trenderRow={row}\r\n\t\t\t\t\trenderSeparator={separator}\r\n\t\t\t\t\trenderFooter={() => (<div style={{ padding: 30, textAlign: 'center' }}>\r\n\t\t\t\t\t\t{loading ? 'Loading...' : 'Loaded'}\r\n\t\t\t\t\t</div>)}\r\n\t\t\t\t\tpageSize={4}\r\n\t\t\t\t\tuseBodyScroll\r\n\t\t\t\t\tonEndReached={this.loadMore}\r\n\t\t\t\t>\r\n\t\t\t\t</ListView>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.getAppointmentList(this.page);\r\n\t}\r\n\tgetAppointmentList = (page = 1) => {\r\n\t\tlet { day } = store;\r\n\t\tif(page === 1){\r\n\t\t\tthis.page = 1;//初始化\r\n\t\t}\r\n\t\taxios.get('/api/v1/orders/wx', {\r\n\t\t\tparams: {\r\n\t\t\t\tpage,\r\n\t\t\t\tsize: SIZE,\r\n\t\t\t\tday: day\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tstore.loading = false;\r\n\t\t\t\tlet resData = res.data;\r\n\t\t\t\tlet appointmentList = Array.from(store.appointment_list);\r\n\t\t\t\tif(page === 1){//第一页重新渲染\r\n\t\t\t\t\tappointmentList = [];\r\n\t\t\t\t}\r\n\t\t\t\tlet concatResult;\r\n\t\t\t\tif(resData.user_grade == 1){//用户\r\n\t\t\t\t\tconcatResult = appointmentList.concat(resData.orders);\r\n\t\t\t\t\tstore.user_type = 'user';\r\n\t\t\t\t}else{//管理员\r\n\t\t\t\t\tconcatResult = appointmentList.concat(resData.data);\r\n\t\t\t\t\tstore.total = resData.total;\r\n\t\t\t\t\tstore.user_type = 'admin';\r\n\t\t\t\t}\r\n\t\t\t\tstore.appointment_list = concatResult;\r\n\t\t\t\tstore.dataSource = store.dataSource.cloneWithRows(concatResult);\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tstore.loading = false;\r\n\t\t\t});\r\n\t};\r\n\treject = (order_id) => {\r\n\t\tModal.alert('拒绝受理', '将拒绝受理此项业务，请确认',[\r\n\t\t\t{\r\n\t\t\t\ttext: '取消'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: '确认',\r\n\t\t\t\tonPress: () => this.handleAppointment(order_id, 3)\r\n\t\t\t}\r\n\t\t])\r\n\t};\r\n\tresolve = (order_id) => {\r\n\t\tModal.alert('受理', '将受理此项业务，请确认',[\r\n\t\t\t{\r\n\t\t\t\ttext: '取消'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: '确认',\r\n\t\t\t\tonPress: () => this.handleAppointment(order_id, 2)\r\n\t\t\t}\r\n\t\t])\r\n\t};\r\n\tcancel = order_id => {\r\n\t\tModal.alert('取消预约', '将取消预约此项业务，请确认',[\r\n\t\t\t{\r\n\t\t\t\ttext: '取消'\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttext: '确认',\r\n\t\t\t\tonPress: () => this.handleAppointment(order_id, 4)\r\n\t\t\t}\r\n\t\t])\r\n\t};\r\n\tloadMore = () => {\r\n\t\tstore.loading = true;\r\n\t\tthis.getAppointmentList(++this.page);\r\n\t};\r\n\thandleAppointment = (order_id, state) => {\r\n\t\taxios.post('/api/v1/order/handel', {\r\n\t\t\tid: order_id,\r\n\t\t\tstate\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tlet resData = res.data;\r\n\t\t\t\tif(resData.error_code === 0 || resData.errorCode === 0){\r\n\t\t\t\t\tlet appointmentList = Array.from(store.appointment_list);\r\n\t\t\t\t\tappointmentList.forEach(a => {\r\n\t\t\t\t\t\tif(a.order_id === order_id){\r\n\t\t\t\t\t\t\ta.state = state;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tstore.appointment_list = appointmentList;\r\n\t\t\t\t\tstore.dataSource = store.dataSource.cloneWithRows(appointmentList);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tlet resData = res.data;\r\n\t\t\t\tif(resData.error_code === 10001 || resData.errorCode === 10001){\r\n\t\t\t\t\tgetWxToken();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t};\r\n\tgoIndex = () => {\r\n\t\tthis.props.history.push('/');\r\n\t};\r\n\topenDateModal = () => {\r\n\t\tstore.visible = true;\r\n\t};\r\n\tcloseDateModal = () => {\r\n\t\tstore.visible = false;\r\n\t};\r\n\tsetDate = (date) => {\r\n\t\tstore.date = date;\r\n\t\tstore.visible = false;\r\n\t\tthis.getAppointmentList();\r\n\t}\r\n}\r\nexport default AppointmentList;","const SIZE = 15;\r\nconst MALE = 1,\r\n\tFEMALE = 2;\r\n\r\n// const\r\nexport {\r\n\tSIZE,\r\n\tMALE,\r\n\tFEMALE\r\n};","import axios from 'axios';\r\nimport history from '../history';\r\nlet getCode = () => {\r\n\tlet reg = new RegExp(\"(^|&)code=([^&]*)(&|$)\");\r\n\tlet result = location.search.substr(1).match(reg);\r\n\tif (result != null) return decodeURIComponent(result[2]);\r\n\treturn null;\r\n};\r\nlet wxToken = (notForce, code) => {\r\n\t// let origin = encodeURIComponent(location.href);\r\n\tlet { location: { pathname }} = history;\r\n\tlet origin = encodeURIComponent(`http://bank.mengant.cn/index.html#${pathname}`);\r\n\tlet appid = 'wxf4b7d664b2461f4b';\r\n\tlet requestURL = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${appid}&redirect_uri=${origin}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect;`\r\n\t//notForce true,上传code供后端获取用户信息 false,强制重新获取code\r\n\tif(!notForce){\r\n\t\twindow.location = requestURL;\r\n\t}else{\r\n\t\taxios.get('/api/v1/token/user', {\r\n\t\t\tparams: {\r\n\t\t\t\tcode\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\t// alert(res.data);\r\n\t\t\t})\r\n\t}\r\n};\r\n\r\nlet getWxToken = () => {\r\n\t//如果有code则上传\r\n\tlet code = getCode();\r\n\twxToken(!!code, code);\r\n};\r\nlet refreshWxToken = () => {\r\n\t//强制重新获取code\r\n\twxToken(false);\r\n};\r\nexport {\r\n\tgetWxToken,\r\n\trefreshWxToken\r\n};","let multipleClass = (styleObj, classStr) => {\r\n\treturn classStr.trim().split(/\\s+/).map(key => styleObj[key]).join(' ');\r\n};\r\nexport default multipleClass;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"_2sfP_co4kRvgphaC1NMPV2\",\"date\":\"_3fLReK9Q-jcWfZk702_V5Z\",\"btn-group\":\"xgFttKZnF3OHJtqAx5OvH\"};"],"sourceRoot":""}