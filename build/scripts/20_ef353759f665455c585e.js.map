{"version":3,"sources":["webpack:///./helpers/get_param.js","webpack:///./stores/appointment_new.js","webpack:///./helpers/get_min_max_date_time.js","webpack:///./helpers/fresh_token.js","webpack:///./pages_mobile/appointment/new.js","webpack:///./helpers/multiple_class.js","webpack:///./less/appointment_new.less?a071"],"names":["search","location","href","split","paramsObj","forEach","p","paramArr","length","key","value","concat","_mobx","__webpack_require__","Store","this","inputPhone","join","selectSex","selected_bank","service_type","service_content","date","moment","format","name","phone","identity","sex","bank_id","service","service_item","day","showMoney","money","observable","computed","_moment","now","_moment2","default","minDate","minute","add","toDate","maxDate","hour","promise","wxToken","notForce","code","state","pathname","history","removeParams","requestURL","encodeURIComponent","Array","map","s","Promise","resolve","reject","axios","get","params","then","res","catch","window","getWxToken","arguments","undefined","_get_param2","refreshWxToken","_react","_mobxReact","_fresh_token","AppointmentNew","observer","getServiceList","resData","data","store","origin_service_type_list","service_type_list","item","label","category","error_code","errorCode","_this","getBankList","bank_list","r","address","id","sexList","pickSex","pickBank","bank","pickServiceType","from","type","it","service_content_list","pickServiceContent","handleDate","confirm","disableBtn","_toast2","loading","post","hide","push","Component","bankList","selectedBank","serviceTypeList","serviceType","serviceContentList","serviceContent","minMaxDate","_get_min_max_date_time2","_react2","createElement","className","_multiple_class2","styles","_list2","_inputItem2","placeholder","onChange","val","_picker2","cols","onOk","Item","arrow","moneyKeyboardAlign","style","marginTop","_datePicker2","_extends","mode","minuteStep","_wingBlank2","_button2","disabled","onClick","styleObj","classStr","trim","module","exports","header"],"mappings":"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","file":"scripts/20_ef353759f665455c585e.js","sourcesContent":["let getParam = () => {\r\n\tlet search = location.href.split('?')[1];\r\n\tif(search){\r\n\t\tsearch = search.split('#')[0];//去除hash的干扰\r\n\t\tlet paramsArr = search.split('&');\r\n\t\tlet paramsObj = {};\r\n\t\tparamsArr.forEach(p => {\r\n\t\t\tlet paramArr = p.split('=');\r\n\t\t\tif(paramArr.length === 2){\r\n\t\t\t\tlet key = paramArr[0];\r\n\t\t\t\tlet value = paramArr[1];\r\n\t\t\t\tif(paramsObj[key]){\r\n\t\t\t\t\tparamsObj[key] = [value].concat(paramsObj[key]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tparamsObj[key] = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn paramsObj;\r\n\t}\r\n\treturn {};\r\n};\r\nexport default getParam;","import { observable, computed } from 'mobx';\r\nclass Store {\r\n\t@observable selectSex = [];\r\n\t// @observable origin_bank_list = [];\r\n\t@observable bank_list = [];\r\n\t@observable selected_bank = [];\r\n\t@observable origin_service_type_list = [];\r\n\t@observable service_type_list = [];\r\n\t@observable service_type = [];\r\n\t@observable service_content_list = [];\r\n\t@observable service_content = [];\r\n\t@observable showMoney = false;\r\n\t@observable date = null;\r\n\t@observable name;\r\n\t@observable inputPhone;\r\n\t@observable identity;\r\n\t@observable money;\r\n\t@computed get phone(){\r\n\t\treturn this.inputPhone && this.inputPhone.split(' ').join('');\r\n\t}\r\n\t@computed get sex(){\r\n\t\treturn this.selectSex && this.selectSex[0];\r\n\t}\r\n\t@computed get bank_id(){\r\n\t\treturn this.selected_bank && this.selected_bank[0];\r\n\t}\r\n\t@computed get service(){\r\n\t\treturn this.service_type && this.service_type[0];\r\n\t}\r\n\t@computed get service_item(){\r\n\t\treturn this.service_content && this.service_content[0];\r\n\t}\r\n\t@computed get day (){\r\n\t\tif(this.date) return moment(this.date).format('YYYY-MM-DD HH:mm');\r\n\t\treturn null;\r\n\t}\r\n\t@computed get disableBtn(){\r\n\t\treturn !this.name || !this.phone || !this.identity || !this.sex || !this.bank_id || !this.service || !this.service_item || !this.day || (this.showMoney && !this.money);\r\n\t}\r\n}\r\nexport default new Store();","import moment from \"moment\";\r\n\r\nlet getMinMaxDateTime = () => {\r\n\tlet now = moment();\r\n\tlet minDateTime;\r\n\tif(now.minute() > 30){\r\n\t\tminDateTime = now.add(1, 'h').minute(0);\r\n\t}else {\r\n\t\tminDateTime = now.minute(30);\r\n\t}\r\n\treturn {\r\n\t\tminDate: minDateTime.toDate(),\r\n\t\tmaxDate: moment().add(2,'d').hour(23).minute(59).toDate()\r\n\t}\r\n};\r\nexport default getMinMaxDateTime;","import axios from 'axios';\r\nimport getParam from './get_param';\r\nimport history from '../history';\r\nlet promise = null;\r\n\r\nlet wxToken = (notForce, code, state) => {\r\n\tlet { location: {pathname} } = history;\r\n\tlet removeHash = location.href.split('#')[0];\r\n\tlet removeParams = removeHash.split('?')[0];\r\n\tlet origin = encodeURIComponent(removeParams + '#' + pathname);\r\n\tlet appid = 'wxf4b7d664b2461f4b';\r\n\tif(state instanceof Array){\r\n\t\tstate = state.map(s => 'state=' + s).join('#');\r\n\t}else{\r\n\t\tstate = 'state=' + state;\r\n\t}\r\n\tlet requestURL = `https://open.weixin.qq.com/connect/oauth2/authorize?appid=${appid}&redirect_uri=${origin}&response_type=code&scope=snsapi_userinfo&${state}#wechat_redirect`;\r\n\t//notForce true,上传code供后端获取用户信息 false,强制重新获取code\r\n\tif(!notForce){\r\n\t\twindow.location = requestURL;\r\n\t}else{\r\n\t\tif(promise) return promise;\r\n\t\tpromise = new Promise((resolve, reject) =>{\r\n\t\t\taxios.get('/api/v1/token/user', {\r\n\t\t\t\tparams: {\r\n\t\t\t\t\tcode\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tpromise = null;\r\n\t\t\t\t\tresolve(res);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(res => {\r\n\t\t\t\t\tpromise = null;\r\n\t\t\t\t\treject(res);\r\n\t\t\t\t})\r\n\t\t});\r\n\t\treturn promise;\r\n\t}\r\n};\r\n\r\nlet getWxToken = (state = '') => {\r\n\t//如果有code则上传\r\n\tlet code = getParam().code;\r\n\treturn wxToken(!!code, code, state);\r\n};\r\nlet refreshWxToken = () => {\r\n\t//强制重新获取code\r\n\treturn wxToken(false);\r\n};\r\nexport {\r\n\tgetWxToken,\r\n\trefreshWxToken\r\n};","import React, { Component } from 'react';\r\nimport styles from '../../less/appointment_new.less';\r\nimport multipleClass from '../../helpers/multiple_class';\r\nimport { List, InputItem, Picker, DatePicker, Button, WingBlank, Toast } from 'antd-mobile';\r\nimport { observer } from 'mobx-react';\r\nimport store from '../../stores/appointment_new';\r\nimport getMinMaxDateTime from '../../helpers/get_min_max_date_time';\r\nimport axios from 'axios';\r\nimport history from '../../history';\r\nimport {getWxToken} from \"../../helpers/fresh_token\";\r\n@observer\r\nclass AppointmentNew extends Component{\r\n\trender(){\r\n\t\tlet { showMoney, date, bank_list, selected_bank, disableBtn } = store;\r\n\t\tlet bankList = Array.from(bank_list);\r\n\t\tlet selectedBank = Array.from(selected_bank);\r\n\t\tlet selectSex = Array.from(store.selectSex);\r\n\t\tlet serviceTypeList = Array.from(store.service_type_list);\r\n\t\tlet serviceType = Array.from(store.service_type);\r\n\t\tlet serviceContentList = Array.from(store.service_content_list);\r\n\t\tlet serviceContent = Array.from(store.service_content);\r\n\t\tlet minMaxDate = getMinMaxDateTime();\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<h3 className={multipleClass(styles, 'header')}>填写预约信息</h3>\r\n\t\t\t\t<List>\r\n\t\t\t\t\t<InputItem placeholder='请输入姓名' onChange={val => store.name = val}>姓名</InputItem>\r\n\t\t\t\t\t<InputItem placeholder='请输入手机号' type='phone' onChange={val => store.inputPhone = val}>手机号</InputItem>\r\n\t\t\t\t\t<InputItem placeholder='请输入身份证号' onChange={val => store.identity = val}>身份证号</InputItem>\r\n\t\t\t\t\t<Picker\r\n\t\t\t\t\t\tdata={this.sexList}\r\n\t\t\t\t\t\tvalue={selectSex}\r\n\t\t\t\t\t\tcols={1}\r\n\t\t\t\t\t\tonOk={this.pickSex}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<List.Item arrow='horizontal'>性别</List.Item>\r\n\t\t\t\t\t</Picker>\r\n\t\t\t\t\t<Picker\r\n\t\t\t\t\t\tdata={bankList}\r\n\t\t\t\t\t\tvalue={selectedBank}\r\n\t\t\t\t\t\tcols={1}\r\n\t\t\t\t\t\tonOk={this.pickBank}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<List.Item arrow='horizontal'>预约银行</List.Item>\r\n\t\t\t\t\t</Picker>\r\n\t\t\t\t\t<Picker\r\n\t\t\t\t\t\tdata={serviceTypeList}\r\n\t\t\t\t\t\tvalue={serviceType}\r\n\t\t\t\t\t\tcols={1}\r\n\t\t\t\t\t\tonOk={this.pickServiceType}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<List.Item arrow='horizontal'>服务类别</List.Item>\r\n\t\t\t\t\t</Picker>\r\n\t\t\t\t\t<Picker\r\n\t\t\t\t\t\tdata={serviceContentList}\r\n\t\t\t\t\t\tvalue={serviceContent}\r\n\t\t\t\t\t\tcols={1}\r\n\t\t\t\t\t\tonOk={this.pickServiceContent}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<List.Item arrow='horizontal'>服务内容</List.Item>\r\n\t\t\t\t\t</Picker>\r\n\t\t\t\t\t{showMoney ? <InputItem placeholder='请输入预约金额' type='money' moneyKeyboardAlign='left' onChange={val => store.money = val}>预约金额</InputItem> : null}\r\n\t\t\t\t</List>\r\n\t\t\t\t<List style={{marginTop: '24px'}}>\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tmode='datetime'\r\n\t\t\t\t\t\tminuteStep={30}\r\n\t\t\t\t\t\t{...minMaxDate}\r\n\t\t\t\t\t\tonChange={this.handleDate}\r\n\t\t\t\t\t\tvalue={date}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<List.Item arrow='horizontal'>预约时间</List.Item>\r\n\t\t\t\t\t</DatePicker>\r\n\t\t\t\t</List>\r\n\t\t\t\t<WingBlank style={{marginTop: 48}}>\r\n\t\t\t\t\t<Button type='primary' disabled={disableBtn} onClick={this.confirm}>提交预约申请</Button>\r\n\t\t\t\t</WingBlank>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.getServiceList();\r\n\t\tthis.getBankList();\r\n\t}\r\n\tgetServiceList = () => {\r\n\t\taxios.get('/api/v1/service/services')\r\n\t\t\t.then(res => {\r\n\t\t\t\tlet resData = res.data;\r\n\t\t\t\tstore.origin_service_type_list = resData;\r\n\t\t\t\tstore.service_type_list = resData.map(item => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlabel: item.category,\r\n\t\t\t\t\t\tvalue: item.category\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tlet resData = res.data;\r\n\t\t\t\tif (!resData) {\r\n\t\t\t\t\tlet promise = getWxToken();\r\n\t\t\t\t\tpromise.then(res => {\r\n\t\t\t\t\t\tthis.getServiceList();\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (resData.error_code === 10001 || resData.errorCode === 10001) {\r\n\t\t\t\t\tlet promise = getWxToken();\r\n\t\t\t\t\tpromise.then(res => {\r\n\t\t\t\t\t\tthis.getServiceList();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t};\r\n\tgetBankList = () => {\r\n\t\taxios.get('/api/v1/banks')\r\n\t\t\t.then(res => {\r\n\t\t\t\tlet resData = res.data;\r\n\t\t\t\t// store.origin_bank_list = resData;\r\n\t\t\t\tstore.bank_list = resData.map(r => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlabel: r.name + '(' + r.address + ')',\r\n\t\t\t\t\t\tvalue: r.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\t\t\t\tlet resData = res.data;\r\n\t\t\t\tif (!resData) {\r\n\t\t\t\t\tlet promise = getWxToken();\r\n\t\t\t\t\tpromise.then(res => {\r\n\t\t\t\t\t\tthis.getBankList();\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if (resData.error_code === 10001 || resData.errorCode === 10001) {\r\n\t\t\t\t\tlet promise = getWxToken();\r\n\t\t\t\t\tpromise.then(res => {\r\n\t\t\t\t\t\tthis.getBankList();\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t};\r\n\tsexList = [{\r\n\t\tlabel: '男',\r\n\t\tvalue: '1'\r\n\t}, {\r\n\t\tlabel: '女',\r\n\t\tvalue: '2'\r\n\t}];\r\n\tpickSex = (sex) => {\r\n\t\tstore.selectSex = sex;\r\n\t};\r\n\tpickBank = (bank) => {\r\n\t\tstore.selected_bank = bank;\r\n\t};\r\n\tpickServiceType = (value) => {\r\n\t\tstore.service_type = value;\r\n\t\tlet item = [];\r\n\t\tlet showMoney = false;\r\n\t\tArray.from(store.origin_service_type_list).forEach(type => {\r\n\t\t\tif(type.category === value[0]){\r\n\t\t\t\tif(type.money === 1){\r\n\t\t\t\t\tshowMoney = true;\r\n\t\t\t\t}\r\n\t\t\t\titem = type.item.map(it => {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tlabel: it,\r\n\t\t\t\t\t\tvalue: it\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t\tstore.service_content_list = item;\r\n\t\tstore.service_content = [];\r\n\t\tstore.showMoney = showMoney;\r\n\t};\r\n\tpickServiceContent = (value) => {\r\n\t\tstore.service_content = value;\r\n\t};\r\n\thandleDate = date => {\r\n\t\tstore.date = date;\r\n\t};\r\n\tconfirm = () => {\r\n\t\tlet { disableBtn, name, phone, identity, sex, service, service_item, bank_id, day, money,showMoney } = store;\r\n\t\tif(!disableBtn){\r\n\t\t\tlet params = {\r\n\t\t\t\tname, phone, identity, sex, service, service_item, bank_id, day\r\n\t\t\t};\r\n\t\t\tif(showMoney) {\r\n\t\t\t\tparams.money = money;\r\n\t\t\t}\r\n\t\t\tToast.loading('提交中，请稍后...', 30);\r\n\t\t\taxios.post('/api/v1/order/save', params)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tToast.hide();\r\n\t\t\t\t\tlet resData = res.data;\r\n\t\t\t\t\tif(resData.error_code === 0 || resData.errorCode === 0){\r\n\t\t\t\t\t\thistory.push('/appointment/result');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(res => {\r\n\t\t\t\t\tToast.hide();\r\n\t\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\nexport default AppointmentNew;","let multipleClass = (styleObj, classStr) => {\r\n\treturn classStr.trim().split(/\\s+/).map(key => styleObj[key]).join(' ');\r\n};\r\nexport default multipleClass;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"_2YR1Z9jstTfLS7Tdu9GRqj\"};"],"sourceRoot":""}