{"version":3,"sources":["webpack:///./stores/appointment_list.js","webpack:///./pages_mobile/appointment/list.js","webpack:///./config/CONSTANT.js","webpack:///./helpers/multiple_class.js","webpack:///./less/appointment_list.less?108f"],"names":["_mobx","__webpack_require__","_moment","Store","_moment2","default","this","date","format","observable","toDate","computed","_react","_mobxReact","_CONSTANT","moment","locale","AppointmentList","observer","dataSource","_listView2","DataSource","rowHasChanged","row1","row2","getAppointmentList","page","arguments","length","undefined","day","store","_fresh_token2","axios","get","params","size","SIZE","then","res","resData","data","appointmentList","Array","from","appointment_list","user_grade","concat","name","phone","identity","sex","service","service_item","state","money","total","catch","goIndex","_this","props","history","push","openDateModal","visible","closeDateModal","setDate","Component","cloneWithRows","_react2","createElement","className","_multiple_class2","styles","_button2","inline","onClick","_list2","style","borderBottom","Item","_datePicker2","mode","onDismiss","onOk","renderSectionHeader","renderRow","rowData","sectionID","rowID","_ref2","key","padding","display","_defineProperty","height","marginRight","src","img","alt","lineHeight","flexGrow","flexShrink","marginBottom","fontWeight","address","type","renderSeparator","margin","pageSize","useBodyScroll","MALE","FEMALE","styleObj","classStr","trim","split","map","join","module","exports","home","btn-group"],"mappings":"kZAAAA,EAAAC,EAAA,QACAC,EAAAD,EAAA,moBACME,0PAKJ,OAAO,EAAAC,EAAAC,SAAOC,KAAKC,MAAMC,OAAO,+CAJhCC,2DAAkB,EAAAL,EAAAC,WAASK,uCAC3BD,2DAAqB,yCACrBA,qFACAE,yFAIa,IAAIR,qbCVnB,IAAAS,EAAAX,EAAA,mBAEAA,EAAA,aACAA,EAAA,SACAY,EAAAZ,EAAA,YACAA,EAAA,aACAA,EAAA,aAEAA,EAAA,SACAa,EAAAb,EAAA,YACAA,EAAA,uVAHAc,UAAOC,OAAO,aAKRC,KADLC,yTAEAC,WAAa,IAAIC,EAAAf,QAASgB,YACzBC,cAAe,SAACC,EAAMC,GAAP,OAAgBD,IAASC,OAqEzCC,mBAAqB,WAAc,IAAbC,EAAaC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,EACtBG,EAAQC,UAARD,KACN,EAAAE,EAAA3B,WACA4B,UAAMC,IAAI,qBACTC,QACCT,OACAU,KAAMC,OACNP,IAAKA,KAGLQ,KAAK,SAAAC,GACL,IAAIC,EAAUD,EAAIE,KACdC,EAAkBC,MAAMC,KAAKb,UAAMc,kBAsBb,IAAvBL,EAAQM,WACVf,UAAMc,iBAAmBH,EAAgBK,SArBzCC,KAAQ,MACRC,MAAS,cACTC,SAAY,qBACZC,IAAO,EACPC,QAAW,OACXC,aAAgB,SAChBvB,IAAO,sBACPwB,MAAS,IACTC,MAAS,IAETP,KAAQ,MACRC,MAAS,cACTC,SAAY,qBACZC,IAAO,EACPC,QAAW,OACXC,aAAgB,SAChBvB,IAAO,sBACPwB,MAAS,IACTC,MAAS,MAKTxB,UAAMc,iBAAmBL,EAAQC,KACjCV,UAAMyB,MAAQhB,EAAQgB,SAIvBC,MAAM,SAAAlB,SAITmB,QAAU,WACTC,EAAKC,MAAMC,QAAQC,KAAK,QAEzBC,cAAgB,WACfhC,UAAMiC,SAAU,KAEjBC,eAAiB,WAChBlC,UAAMiC,SAAU,KAEjBE,QAAU,SAAC3D,GACVwB,UAAMxB,KAAOA,EACbwB,UAAMiC,SAAU,6UAhIYG,iDAIrB,IACD5D,EAAoCwB,UAApCxB,KAAMyD,EAA8BjC,UAA9BiC,QAASnB,EAAqBd,UAArBc,iBACjBH,EAAkBC,MAAMC,KAAKC,GACjCvC,KAAKa,WAAab,KAAKa,WAAWiD,cAAc1B,GA4BhD,OACC2B,EAAAhE,QAAAiE,cAAA,OAAKC,UAAU,oBACdF,EAAAhE,QAAAiE,cAAA,OAAKC,WAAW,EAAAC,EAAAnE,SAAcoE,UAAQ,SACrCJ,EAAAhE,QAAAiE,cAAAI,EAAArE,SAAQsE,QAAQ,EAAMvC,KAAK,QAAQwC,QAAStE,KAAKoD,SAAjD,OAEDW,EAAAhE,QAAAiE,cAAAO,EAAAxE,SAAMyE,OAAQC,aAAa,SAC1BV,EAAAhE,QAAAiE,cAAAO,EAAAxE,QAAM2E,MACLJ,QAAStE,KAAKyD,eAEdM,EAAAhE,QAAAiE,cAAA,oBACAD,EAAAhE,QAAAiE,cAAA,QAAMC,WAAW,EAAAC,EAAAnE,SAAcoE,UAAQ,UAAU,EAAArE,EAAAC,SAAOE,GAAMC,OAAO,sBAGvE6D,EAAAhE,QAAAiE,cAAAW,EAAA5E,SACC2D,QAASA,EACTkB,KAAK,OACLC,UAAW7E,KAAK2D,eAChBmB,KAAM9E,KAAK4D,UAEZG,EAAAhE,QAAAiE,cAAAlD,EAAAf,SACCc,WAAYb,KAAKa,WACjBkE,oBAAqB,kBAAMhB,EAAAhE,QAAAiE,cAAA,qBAC3BgB,UAxCS,SAACC,EAASC,EAAWC,GAAU,IAAAC,EAC1C,OACCrB,EAAAhE,QAAAiE,cAAA,OAAKqB,IAAKF,EAAOX,OAASc,QAAS,WAClCvB,EAAAhE,QAAAiE,cAAA,OAAKQ,OAAAY,GAASG,QAAS,eAAlBC,EAAAJ,EAAA,UAA0C,QAA1CI,EAAAJ,EAAA,UAA2D,UAA3DA,IACJrB,EAAAhE,QAAAiE,cAAA,OAAKQ,OAASiB,OAAQ,OAAQC,YAAa,QAAUC,IAAKV,EAAQW,IAAKC,IAAI,KAC3E9B,EAAAhE,QAAAiE,cAAA,OAAKQ,OAASsB,WAAY,EAAGC,SAAU,EAAGC,WAAY,IACrDjC,EAAAhE,QAAAiE,cAAA,OAAKQ,OAASyB,aAAc,MAAOC,WAAY,SAAWjB,EAAQvC,MAClEqB,EAAAhE,QAAAiE,cAAA,SAAIiB,EAAQkB,QAAZ,KAAuBlB,EAAQpC,KAC/BkB,EAAAhE,QAAAiE,cAAA,SAAIiB,EAAQnC,QAAU,IAAKmC,EAAQlC,aAAckC,EAAQhC,MAAQ,EAAI,IAAMgC,EAAQhC,MAAQ,KAE5Fc,EAAAhE,QAAAiE,cAAA,OAAKC,WAAW,EAAAC,EAAAnE,SAAcoE,UAAQ,cACrCJ,EAAAhE,QAAAiE,cAAAI,EAAArE,SAAQsE,QAAQ,EAAMvC,KAAK,QAAQsE,KAAK,WAAxC,MACArC,EAAAhE,QAAAiE,cAAAI,EAAArE,SAAQsE,QAAQ,EAAMvC,KAAK,QAAQsE,KAAK,WAAxC,UA6BFC,gBAlDe,SAACnB,EAAWC,GAAZ,OACjBpB,EAAAhE,QAAAiE,cAAA,OACCqB,IAAQH,EAAR,IAAqBC,EACrBX,OACC8B,OAAQ,SACR7B,aAAc,wBA8Cd8B,SAAU,EACVC,eAAA,EACAhC,OAAQiB,OAAQ,oDAQnBzF,KAAKmB,4CA8DQR,wFC3IdoB,KAJY,KAKZ0E,KAJY,IAKZC,OAJS,gGCFU,SAACC,EAAUC,GAC9B,OAAOA,EAASC,OAAOC,MAAM,OAAOC,IAAI,SAAA1B,GAAA,OAAOsB,EAAStB,KAAM2B,KAAK,4BCApEC,EAAAC,SAAkBC,KAAA,0BAAAlH,KAAA,0BAAAmH,YAAA","file":"scripts/19_da00777b832641d370ff.js","sourcesContent":["import { observable, computed } from 'mobx';\r\nimport moment from 'moment';\r\nclass Store {\r\n\t@observable date = moment().toDate();\r\n\t@observable visible = false;\r\n\t@observable appointment_list = [];\r\n\t@computed get day(){\r\n\t\treturn moment(this.date).format('YYYY-MM-DD');\r\n\t}\r\n}\r\nexport default new Store();","import React, { Component } from 'react';\r\nimport { Button, List, DatePicker, ListView } from 'antd-mobile';\r\nimport multipleClass from '../../helpers/multiple_class';\r\nimport styles from '../../less/appointment_list.less';\r\nimport { observer } from 'mobx-react';\r\nimport store from '../../stores/appointment_list';\r\nimport moment from 'moment';\r\nmoment.locale('zh_cn');\r\nimport axios from 'axios';\r\nimport { SIZE, MALE, FEMALE} from \"../../config/CONSTANT\";\r\nimport getWxToken from '../../helpers/fresh_token';\r\n@observer\r\nclass AppointmentList extends Component{\r\n\tdataSource = new ListView.DataSource({\r\n\t\trowHasChanged: (row1, row2) => row1 !== row2,\r\n\t});\r\n\trender(){\r\n\t\tlet { date, visible, appointment_list } = store;\r\n\t\tlet appointmentList = Array.from(appointment_list);\r\n\t\tthis.dataSource = this.dataSource.cloneWithRows(appointmentList);\r\n\t\tconst separator = (sectionID, rowID) => (\r\n\t\t\t<div\r\n\t\t\t\tkey={`${sectionID}-${rowID}`}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tmargin: '0 15px',\r\n\t\t\t\t\tborderBottom: '1px solid #ECECED',\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t);\r\n\t\tconst row = (rowData, sectionID, rowID) => {\r\n\t\t\treturn (\r\n\t\t\t\t<div key={rowID} style={{ padding: '0 15px' }}>\r\n\t\t\t\t\t<div style={{ display: '-webkit-box', display: 'flex', padding: '15px 0' }}>\r\n\t\t\t\t\t\t<img style={{ height: '64px', marginRight: '15px' }} src={rowData.img} alt=\"\" />\r\n\t\t\t\t\t\t<div style={{ lineHeight: 1, flexGrow: 1, flexShrink: 1 }}>\r\n\t\t\t\t\t\t\t<div style={{ marginBottom: '8px', fontWeight: 'bold' }}>{rowData.name}</div>\r\n\t\t\t\t\t\t\t<p>{rowData.address}, {rowData.sex}</p>\r\n\t\t\t\t\t\t\t<p>{rowData.service + '/' +rowData.service_item}{rowData.money > 0 ? '/' + rowData.money : ''}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className={multipleClass(styles, 'btn-group')}>\r\n\t\t\t\t\t\t\t<Button inline={true} size='small' type='warning'>拒绝</Button>\r\n\t\t\t\t\t\t\t<Button inline={true} size='small' type='primary'>受理</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div className='appointment_list'>\r\n\t\t\t\t<div className={multipleClass(styles, 'home')}>\r\n\t\t\t\t\t<Button inline={true} size='small' onClick={this.goIndex}>首页</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<List style={{borderBottom:'none'}}>\r\n\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\tonClick={this.openDateModal}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span>预约日期</span>\r\n\t\t\t\t\t\t<span className={multipleClass(styles, 'date')}>{moment(date).format('YYYY/MM/DD dddd')}</span>\r\n\t\t\t\t\t</List.Item>\r\n\t\t\t\t</List>\r\n\t\t\t\t<DatePicker\r\n\t\t\t\t\tvisible={visible}\r\n\t\t\t\t\tmode='date'\r\n\t\t\t\t\tonDismiss={this.closeDateModal}\r\n\t\t\t\t\tonOk={this.setDate}\r\n\t\t\t\t/>\r\n\t\t\t\t<ListView\r\n\t\t\t\t\tdataSource={this.dataSource}\r\n\t\t\t\t\trenderSectionHeader={() => <span>预约列表</span>}\r\n\t\t\t\t\trenderRow={row}\r\n\t\t\t\t\trenderSeparator={separator}\r\n\t\t\t\t\tpageSize={4}\r\n\t\t\t\t\tuseBodyScroll\r\n\t\t\t\t\tstyle={{height: 600}}\r\n\t\t\t\t>\r\n\r\n\t\t\t\t</ListView>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.getAppointmentList();\r\n\t}\r\n\tgetAppointmentList = (page = 1) => {\r\n\t\tlet { day } = store;\r\n\t\tgetWxToken();\r\n\t\taxios.get('/api/v1/orders/wx', {\r\n\t\t\tparams: {\r\n\t\t\t\tpage,\r\n\t\t\t\tsize: SIZE,\r\n\t\t\t\tday: day\r\n\t\t\t}\r\n\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tlet resData = res.data;\r\n\t\t\t\tlet appointmentList = Array.from(store.appointment_list);\r\n\t\t\t\tlet orders = [{\r\n\t\t\t\t\t\"name\": \"朱明良\",\r\n\t\t\t\t\t\"phone\": \"18956225230\",\r\n\t\t\t\t\t\"identity\": \"34262619901001****\",\r\n\t\t\t\t\t\"sex\": 1,\r\n\t\t\t\t\t\"service\": \"ATM机\",\r\n\t\t\t\t\t\"service_item\": \"ATM机吞卡\",\r\n\t\t\t\t\t\"day\": \"2018-06-02 00:00:00\",\r\n\t\t\t\t\t\"state\": \"1\",\r\n\t\t\t\t\t\"money\": 2\r\n\t\t\t\t}, {\r\n\t\t\t\t\t\"name\": \"朱明良\",\r\n\t\t\t\t\t\"phone\": \"18956225230\",\r\n\t\t\t\t\t\"identity\": \"34262619901001****\",\r\n\t\t\t\t\t\"sex\": 1,\r\n\t\t\t\t\t\"service\": \"ATM机\",\r\n\t\t\t\t\t\"service_item\": \"ATM机吞卡\",\r\n\t\t\t\t\t\"day\": \"2018-06-02 10:00:00\",\r\n\t\t\t\t\t\"state\": \"1\",\r\n\t\t\t\t\t\"money\": 2\r\n\t\t\t\t}];\r\n\t\t\t\tif(resData.user_grade === 1){\r\n\t\t\t\t\tstore.appointment_list = appointmentList.concat(orders);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstore.appointment_list = resData.data;\r\n\t\t\t\t\tstore.total = resData.total;\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\t\t\t.catch(res => {\r\n\r\n\t\t\t});\r\n\t};\r\n\tgoIndex = () => {\r\n\t\tthis.props.history.push('/');\r\n\t};\r\n\topenDateModal = () => {\r\n\t\tstore.visible = true;\r\n\t};\r\n\tcloseDateModal = () => {\r\n\t\tstore.visible = false;\r\n\t};\r\n\tsetDate = (date) => {\r\n\t\tstore.date = date;\r\n\t\tstore.visible = false;\r\n\t}\r\n}\r\nexport default AppointmentList;","const SIZE = 15;\r\nconst MALE = 1,\r\n\tFEMALE = 2;\r\nexport {\r\n\tSIZE,\r\n\tMALE,\r\n\tFEMALE\r\n};","let multipleClass = (styleObj, classStr) => {\r\n\treturn classStr.trim().split(/\\s+/).map(key => styleObj[key]).join(' ');\r\n};\r\nexport default multipleClass;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"home\":\"_2sfP_co4kRvgphaC1NMPV2\",\"date\":\"_3fLReK9Q-jcWfZk702_V5Z\",\"btn-group\":\"xgFttKZnF3OHJtqAx5OvH\"};"],"sourceRoot":""}