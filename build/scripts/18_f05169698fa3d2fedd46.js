(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"04Eg":function(e,t,n){e.exports=n.p+"imgs/company6e3dfc8501bb0c5b6ab718fb42d50157.png"},BXQU:function(e,t,n){e.exports={index:"NBTPEOnHPEEn5tPSF1w_c","grid-section":"_2HIMQYkQoRe0NzHL-mjblU",img:"_7B8iEwl_segTVQfEhQLSk","map-container":"_2L8er1C0yOPM8g0-BTddMK",container:"_3iqK_pGAevt3KY9CayYakZ","carousel-container":"KoRmnDa0dCGgn6t6nCYk_","carousel-main":"_1fkk4NK8BySiiyARYJzlar","carousel-item":"_2M-T7fowKiEmVHwb9RxY1K","carousel-link":"_3UNsHO3FgRA6YWneRCve7l","carousel-img":"A9wf6tovXyIPH8doLZmcA","bank-list":"_3QrrWBSqvOIpG3QsU84d6z","bank-name":"_1PV_LQDKPsrxc6fIfBHzyT","bank-address":"_2x5jiO4fbub9SNmV8Oqbtl","bank-distance":"_3H-rYFGIZ-s25fck_5I7HW"}},FlvS:function(e,t,n){"use strict";var a,i,r,l,o,u,c,s,d,f,p;Object.defineProperty(t,"__esModule",{value:!0});var m=n("cneo");function b(e,t,n,a){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0})}function h(e,t,n,a,i){var r={};return Object.keys(a).forEach(function(e){r[e]=a[e]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce(function(n,a){return a(e,t,n)||n},r),i&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(i):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}var g=(i=h((a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"index_list",i,this),b(this,"e_bank_list",r,this),b(this,"bank_book_list",l,this),b(this,"company_list",o,this),b(this,"carousel_list",u,this),b(this,"distance_list",c,this),b(this,"pois",s,this),b(this,"open",d,this),b(this,"latLng",f,this),b(this,"locationFail",p,this)}).prototype,"index_list",[m.observable],{enumerable:!0,initializer:function(){return[]}}),r=h(a.prototype,"e_bank_list",[m.observable],{enumerable:!0,initializer:function(){return[]}}),l=h(a.prototype,"bank_book_list",[m.observable],{enumerable:!0,initializer:function(){return[]}}),o=h(a.prototype,"company_list",[m.observable],{enumerable:!0,initializer:function(){return[]}}),u=h(a.prototype,"carousel_list",[m.observable],{enumerable:!0,initializer:function(){return[]}}),c=h(a.prototype,"distance_list",[m.observable],{enumerable:!0,initializer:function(){return[]}}),s=h(a.prototype,"pois",[m.observable],{enumerable:!0,initializer:function(){return[]}}),d=h(a.prototype,"open",[m.observable],{enumerable:!0,initializer:function(){return!1}}),f=h(a.prototype,"latLng",[m.observable],{enumerable:!0,initializer:null}),p=h(a.prototype,"locationFail",[m.observable],{enumerable:!0,initializer:function(){return!1}}),a);t.default=new g},GZoT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=location.href.split("?")[1];if(e){var t={};return(e=e.split("#")[0]).split("&").forEach(function(e){var n=e.split("=");if(2===n.length){var a=n[0],i=decodeURIComponent(n[1]);t[a]?t[a]=[i].concat(t[a]):t[a]=i}}),t}return{}}},Kplx:function(e,t,n){e.exports=n.p+"imgs/bank_book836a9949427176637e458b7d1e5134e3.png"},bGXD:function(e,t,n){e.exports=n.p+"imgs/e_bank42f6df46e2cd0aa8783c5cae9b6a74e9.png"},dO77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshWxToken=t.getWxToken=void 0;var a=l(n("czhI")),i=l(n("GZoT")),r=l(n("SGp1"));function l(e){return e&&e.__esModule?e:{default:e}}var o=null,u=function(e,t,n){var i=r.default.location.pathname,l=location.href.split("#")[0].split("?")[0],u=encodeURIComponent(l+"#"+i),c="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+window.appConfig.appId+"&redirect_uri="+u+"&response_type=code&scope=snsapi_userinfo&state="+n+"#wechat_redirect";if(e)return o||(o=new Promise(function(e,n){a.default.get("/api/v1/token/user",{params:{code:t}}).then(function(t){o=null,e(t)}).catch(function(e){o=null,n(e)})}));window.location=c};t.getWxToken=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,i.default)().code;return-1!==location.host.indexOf("localhost")||-1!==location.host.indexOf("127.0.0.1")?new Promise(function(e,t){t()}):u(!!t,t,e)},t.refreshWxToken=function(){return u(!1)}},hT6S:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=x(n("CGtu")),r=x(n("iD1t")),l=x(n("gFM/")),o=x(n("q0Ea")),u=x(n("5da2")),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n("AZLO"),n("D2eu"),n("8xQ0"),n("sFxt"),n("Nt9i");var d=n("mXGw"),f=x(d),p=x(n("BXQU")),m=x(n("nE73")),b=n("mBK0"),h=x(n("FlvS")),g=x(n("czhI")),v=n("dO77"),y=x(n("lTdQ")),_=x(n("bGXD")),E=x(n("Kplx")),k=x(n("04Eg")),w=x(n("viQW"));function x(e){return e&&e.__esModule?e:{default:e}}var O=(0,b.observer)(a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getUserLocation=function(){g.default.get("/api/v1/location").then(function(e){var t=e.data[0];h.default.latLng=t,t?(n.loadScript(),setTimeout(function(){g.default.get("/api/v1/location").then(function(e){var t=e.data[0];h.default.latLng=t,n.initMap()})},5500)):h.default.locationFail=!0}).then(function(e){var t=e.data;if(t)if(10001===t.error_code||10001===t.errorCode){(0,v.getWxToken)().then(function(e){n.getUserLocation()})}else h.default.locationFail=!0;else(0,v.getWxToken)().then(function(e){n.getUserLocation()})})},n.loadScript=function(){window.init=n.initMap;var e=document.createElement("script");e.type="text/javascript",e.src="http://map.qq.com/api/js?v=2.exp&callback=init",document.body.appendChild(e)},n.initMap=function(){var e=n,t=h.default.latLng,a=t.latitude,i=t.longitude,r=document.getElementById("container");r.style.height="220px";var l=new qq.maps.LatLng(a,i),o={zoom:13,center:l,noClear:!0,mapTypeId:qq.maps.MapTypeId.ROADMAP,draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0,keyboardShortcuts:!1,panControl:!1,zoomControl:!1,scaleControl:!1},u=new qq.maps.Map(r,o),c=[],s=new qq.maps.SearchService({complete:function(t){var n=t.detail.pois;h.default.pois=n;for(var r=0,l=n.length;r<l;r++){var o=n[r],s=new qq.maps.Marker({map:u,position:o.latLng});s.setTitle(r+1),c.push(s)}e.getDistance(a+","+i,n)}});s.setPageCapacity(20),s.searchNearBy("农商行",l,2e3)},n.getDistance=function(e,t){var a=t.map(function(e){return e.latLng.lat+","+e.latLng.lng});window.resDistance=n.resDistance;var i=document.createElement("script");i.src="http://apis.map.qq.com/ws/distance/v1/?from="+e+"&to="+a.join(";")+"&key=GW2BZ-TQNE6-KTASK-E7CO3-22Z37-6IBXA&output=jsonp&callback=resDistance",document.body.appendChild(i)},n.resDistance=function(e){var t=[],n=h.default.pois;0===e.status?t=e.result.elements.map(function(e,t){var a=n[t],i=c({},a,e);return i.distance=i.distance/1e3,i}).sort(function(e,t){return e.distance-t.distance}):t.push({name:"获取银行位置失败",address:"-",distance:0});h.default.distance_list=t},n.getCarouselList=function(){g.default.get("/api/v1/wx/navs",{params:{type:1}}).then(function(e){var t=e.data;h.default.carousel_list=t}).catch(function(e){var t=e.data;if(t){if(10001===t.error_code||10001===t.errorCode){(0,v.getWxToken)().then(function(e){n.getCarouselList()})}}else(0,v.getWxToken)().then(function(e){n.getCarouselList()})})},n.getIndexList=function(){g.default.get("/api/v1/wx/navs",{params:{type:2}}).then(function(e){var t=[],n=[],a=[];e.data.forEach(function(e){1===e.index_type?t.push(e):2===e.index_type?n.push(e):3===e.index_type&&a.push(e)}),h.default.e_bank_list=t,h.default.bank_book_list=n,h.default.company_list=a}).catch(function(e){var t=e.data;if(t){if(10001===t.error_code||10001===t.errorCode){(0,v.getWxToken)().then(function(e){n.getIndexList()})}}else(0,v.getWxToken)().then(function(e){n.getIndexList()})})},n.showBankPanel=function(e,t){t&&(t.preventDefault(),t.stopPropagation()),n.timer||(n.timer=setTimeout(function(){h.default.open=e,n.timer=null},100))},h.default.carousel_list=[],h.default.index_list=[],h.default.distance_list=[],h.default.open=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),s(t,[{key:"render",value:function(){var e=this,t=h.default.locationFail,n=h.default.distance_list,a=h.default.carousel_list,c=h.default.open,s=h.default.e_bank_list,d=h.default.bank_book_list,b=h.default.company_list,g=Array.from(a),v=Array.from(n),x=Array.from(s),O=Array.from(d),T=Array.from(b),C=f.default.createElement(u.default,{className:(0,m.default)(p.default,"bank-list")},v.map(function(e,t){return f.default.createElement(u.default.Item,{key:t,thumb:f.default.createElement("span",null,t+1)},f.default.createElement("h4",{className:(0,m.default)(p.default,"bank-name")},e.name),f.default.createElement("p",{className:(0,m.default)(p.default,"bank-address")},e.address),f.default.createElement("p",{className:(0,m.default)(p.default,"bank-distance")},"驾车距离: ",f.default.createElement("span",null,"约",e.distance,"公里")))}));return f.default.createElement("div",{className:(0,m.default)(p.default,"index")},f.default.createElement(i.default,{style:{boxShadow:"0 2px 8px rgba(0,0,0,.09)",height:"100%"}},f.default.createElement(o.default,{style:{width:"100%",height:"100%"},infinite:!0,autoplay:!0},g.map(function(e,t){return f.default.createElement("a",{key:"carousel-"+t,href:e.url,className:(0,m.default)(p.default,"carousel-link")},f.default.createElement("img",{src:e.logo,className:(0,m.default)(p.default,"carousel-img")}))})),f.default.createElement("section",{className:(0,m.default)(p.default,"grid-section")},f.default.createElement("h3",null,f.default.createElement("img",{src:_.default,style:{width:"100%"}})),f.default.createElement(l.default,{columnNum:3,data:x,square:!1,renderItem:function(e){return f.default.createElement("a",{href:e.url},f.default.createElement("img",{src:e.logo,style:{width:"100%"}}))}})),f.default.createElement("section",{className:(0,m.default)(p.default,"grid-section")},f.default.createElement("h3",null,f.default.createElement("img",{src:E.default,style:{width:"100%"}})),f.default.createElement(l.default,{columnNum:3,data:O,square:!1,renderItem:function(e){return f.default.createElement("a",{href:e.url},f.default.createElement("img",{src:e.logo,style:{width:"100%"}}))}})),f.default.createElement("section",{className:(0,m.default)(p.default,"grid-section")},f.default.createElement("h3",null,f.default.createElement("img",{src:k.default,style:{width:"100%"}})),f.default.createElement(l.default,{columnNum:3,data:T,square:!1,renderItem:function(e){return f.default.createElement("a",{href:e.url},f.default.createElement("img",{src:e.logo,style:{width:"100%"}}))}})),f.default.createElement("section",null,f.default.createElement("h3",null,f.default.createElement("img",{src:w.default,style:{width:"100%"}})),f.default.createElement("a",{className:(0,m.default)(p.default,"map-container"),onClick:function(t){return e.showBankPanel(!0,t)}},f.default.createElement("div",{style:{position:"absolute",width:"100%",height:"100%"}},f.default.createElement("div",{id:"container",className:(0,m.default)(p.default,"container")},t?f.default.createElement("img",{src:y.default,style:{width:"100%"}}):null)))),f.default.createElement(r.default,{onOpenChange:function(){return e.showBankPanel(!c)},style:{minHeight:document.documentElement.clientHeight,zIndex:c?9999:-1,position:"fixed"},contentStyle:{color:"#A6A6A6",textAlign:"center",paddingTop:42},sidebarStyle:{border:"1px solid #ddd"},sidebar:C,open:c,position:"bottom"})))}},{key:"componentDidMount",value:function(){this.getCarouselList(),this.getIndexList(),this.getUserLocation()}}]),t}())||a;t.default=O},lTdQ:function(e,t,n){e.exports=n.p+"imgs/bottom6cd0304d503972cc08f891921e751056.png"},nE73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){return t.trim().split(/\s+/).map(function(t){return e[t]}).join(" ")}},viQW:function(e,t,n){e.exports=n.p+"imgs/fujin00a23a57c63309ca16c3110a87a6a8b6.png"}}]);
//# sourceMappingURL=18_f05169698fa3d2fedd46.js.map